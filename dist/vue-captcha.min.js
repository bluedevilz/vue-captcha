!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("VueCaptcha",[],e):"object"==typeof exports?exports.VueCaptcha=e():t.VueCaptcha=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";e.a={name:"vue-capcay",props:{url:{type:String,default:"",required:!0},captchaStyleName:{type:String,default:"",required:!0},inputId:{type:String,default:"",required:!0}},data:function(){return{userInput:""}},computed:{getCaptchaId:function(){return this.getInstance().captchaId},getUserEnteredCaptchaCode:function(){return this.getCaptchaCode()}},methods:{emitBlur:function(){this.$emit("input",{userEnteredCaptchaCode:this.getUserEnteredCaptchaCode.toUpperCase(),captchaId:this.getCaptchaId})},getCaptchaCode:function(){return this.userInput},spread:function(t,e){for(var n=Object.keys(e),a=0;a<n.length;a++)t[n[a]]=e[n[a]]},getScript:function(t,e){this.ajax(t,function(t){new Function(t)(),"function"==typeof e&&e()})},addValidateEvent:function(t){var e=this,n=t.userInput;n&&this.useUserInputBlurValidation(n)&&(n.onblur=function(){0!==n.value.length&&e.valUnsafe(t,function(e){var a=new CustomEvent("validatecaptcha",{detail:e});n.dispatchEvent(a),e||t.reloadImage()})})},valUnsafe:function(t,e){var n=t.userInput.value;this.ajax(t.validationUrl+"&i="+n,function(t){t="true"==t,e(t)})},useUserInputBlurValidation:function(t){return null!==t.getAttribute("data-correct-captcha")},changeRelativeToAbsoluteUrls:function(t,e){var n=this.getCaptchaEndpointHandler(e),a=this.getBackendBaseUrl(e,n);t=t.replace(/<script.*<\/script>/g,"");for(var r,i,o,u=t.match(/(src|href)="([^"]+)"/g),c=t,s=0;s<u.length;s++)r=u[s].slice(0,-1).replace(/src=|href=/,""),i=new RegExp(".*"+n),o=r.replace(i,'"'+a+n),c=c.replace(r,o);return c},getHtml:function(t,e,n){var a=this,r=e+"?get=html&c="+t;this.ajax(r,function(t){t=a.changeRelativeToAbsoluteUrls(t,e),n(t)})},getCaptchaEndpointHandler:function(t){var e=t.split("/");return e[e.length-1]},getBackendBaseUrl:function(t,e){var n=t.lastIndexOf(e);return t.substring(0,n)},ajax:function(t,e){var n=function(){var t=null;try{t=new XMLHttpRequest}catch(t){console.error(t)}return t}();n&&n&&0===n.readyState&&(n.onreadystatechange=function(){4===n.readyState&&200===n.status&&"function"==typeof e&&e(n.response)},n.open("GET",t,!0),n.send())},addCustomEventPolyfill:function(){"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n},window.CustomEvent.prototype=window.Event.prototype)},getCaptchaStyleName:function(){var t=void 0;if(this.state&&void 0!==this.state.captchaStyleName)return t=this.state.captchaStyleName;if(t=this.captchaStyleName)return t;if(t=this.styleName)return t;throw new Error("The captchaStyleName attribute is not found or its value is not set.")},getInstance:function(){var t=null;if(void 0!==window.botdetect){var e=this.getCaptchaStyleName();t=window.botdetect.getInstanceByStyleName(e)}return t},displayHtml:function(t){var e=this;this.getHtml(t,this.url,function(n){document.getElementById("BDC_CaptchaComponent").innerHTML=n,e.loadScriptIncludes(t)})},reloadImage:function(){this.getInstance().reloadImage(),this.$emit("input",[])},validateUnsafe:function(t){var e=this.getInstance();this.valUnsafe(e,function(n){t(n),this.useUserInputBlurValidation(e.userInput)||n||e.reloadImage()})},generateCaptchaMarkup:function(t){this.captchaStyleName=t,this.displayHtml(t)},loadScriptIncludes:function(t){var e=this,n=document.getElementById("BDC_VCID_"+t);if(n){var a=n.value,r=this.url+"?get=script-include&c="+t+"&t="+a+"&cs=203";this.getScript(r,function(){var t=e.getInstance();t?e.addValidateEvent(t):console.error("window.botdetect undefined.")})}}},beforeMount:function(){this.addCustomEventPolyfill()},mounted:function(){if(this.url){var t=this.getCaptchaStyleName();this.displayHtml(t)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),r={install:function(t){t.component(a.a.name,a.a)}};a.a.install=r.install,e.default=a.a},function(t,e,n){"use strict";var a=n(0),r=n(4),i=n(3),o=i(a.a,r.a,!1,null,null,null);e.a=o.exports},function(t,e){t.exports=function(t,e,n,a,r,i){var o,u=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(o=t,u=t.default);var s="function"==typeof u?u.options:u;e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns,s._compiled=!0),n&&(s.functional=!0),r&&(s._scopeId=r);var l;if(i?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},s._ssrRegister=l):a&&(l=a),l){var d=s.functional,p=d?s.render:s.beforeCreate;d?(s._injectStyles=l,s.render=function(t,e){return l.call(e),p(t,e)}):s.beforeCreate=p?[].concat(p,l):[l]}return{esModule:o,exports:u,options:s}}},function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"BDC_CaptchaComponent"}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userInput,expression:"userInput"}],attrs:{type:"text",id:t.inputId},domProps:{value:t.userInput},on:{input:[function(e){e.target.composing||(t.userInput=e.target.value)},t.emitBlur]}})])},r=[],i={render:a,staticRenderFns:r};e.a=i}])});